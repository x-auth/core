{{define "main_header"}}X-Net Accounts{{end}}
{{define "sub_header"}}Login{{end}}

{{define "content"}}
<form method="post" action="{{.BasePath}}/preflight" id="login-form" novalidate>
  <input type="hidden" name="login-challenge" value="{{.Controller.Challenge}}">
  {{.Controller.CSRFField}}

  <div class="row sm-gutters">
    <div class="col-12">
      {{if .Controller.Restarted}}
      <p>
        {{.Texts.PreflightInfo}}
      </p>
      {{end}}
      {{if ne .Controller.Realm ""}}
      <div style="margin-bottom: 1em">
        <b>Realm:</b> X-NET
        <br>
        <small><a style="margin-right: 3em" href="{{.BasePath}}/?login_challenge={{.Controller.Challenge}}&restarted=1">wechseln</a></small>
      </div>
      {{end}}
      <div class="form-group">
        <label class="label" for="email">
          {{.Texts.Identifier}}
          <abbr class="Texts-danger" data-toggle="tooltip" data-placement="top" title="Required field">*</abbr>
        </label>
        <input class="form-control" {{if .Controller.Error}}style="border: 1px solid red"{{end}} id="email" type="Texts" name="email" autofocus autocomplete="username">
        {{if .Controller.Error}}
          <small style="color: red">Username or password wrong</small>
        {{end}}
      </div>
    </div>
    <div class="col-12">
      <div class="form-group">
        <label class="label" for="password">
          {{.Texts.Password}}
          <abbr class="Texts-danger" data-toggle="tooltip" data-placement="top" title="Required field">*</abbr>
        </label>
        <input class="form-control" {{if .Controller.Error}}style="border: 1px solid red"{{end}} id="password" type="password" name="password" autofocus autocomplete="username">
        {{if .Controller.Error}}
        <small style="color: red">{{.Texts.CredentialsWrong}}</small>
        {{end}}
      </div>
      <div class="form-check">
        <input type="checkbox" class="form-check-input" id="remember" name="remember" value="true">
        <label class="form-check-label" for="remember">{{.Texts.Remember}}</label>
      </div>
    </div>
    <div class="align-items-center flex-row-reverse row mt-1 sm-gutters">
      <div class="col-auto ml-auto">
        <button class="btn btn-tertiary" type="submit">{{.Texts.Login}}</button>
      </div>
    </div>
  </div>
</form>
{{end}}
